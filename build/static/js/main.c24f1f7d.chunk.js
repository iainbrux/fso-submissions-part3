(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{42:function(e,t,n){"use strict";n.r(t);var r=n(17),a=n.n(r),c=n(2),u=n.n(c),s=n(8),o=n(5),i=n(4),l=n(1),d=n(0),b=function(e){var t=e.text;return Object(d.jsx)("h2",{children:t})},f=function(e){var t=e.text,n=e.handleData,r=e.newData;return Object(d.jsxs)("div",{children:[t,Object(d.jsx)("input",{onChange:n,value:r})]})},j=function(e){var t=e.text,n=e.handleSubmit;return Object(d.jsx)("div",{children:Object(d.jsx)("button",{type:"submit",onClick:n,children:t})})},h=function(e){var t=e.handleName,n=e.handleNumber,r=e.handleSubmit,a=e.newName,c=e.newNumber;return Object(d.jsxs)("form",{children:[Object(d.jsx)(f,{text:"name: ",handleData:t,newData:a}),Object(d.jsx)(f,{text:"number: ",handleData:n,newData:c}),Object(d.jsx)(j,{text:"add",handleSubmit:r})]})},p=function(e){var t=e.contact,n=e.deleteFromPhonebook,r=e.setFilterBy,a=Object(l.useState)(!1),c=Object(i.a)(a,2),u=c[0],s=c[1];return u?null:Object(d.jsxs)("li",{children:[t.name," ",t.number,Object(d.jsx)("button",{onClick:function(){n(t),s(!0),r("")},children:"delete"})]})},x=n(6),m=n.n(x),O="/api/persons",v={getContacts:function(){var e=Object(o.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get(O);case 2:return t=e.sent,e.next=5,t.data;case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addContact:function(){var e=Object(o.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post(O,t);case 2:return n=e.sent,e.next=5,n.data;case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateContact:function(){var e=Object(o.a)(u.a.mark((function e(t,n){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.put("".concat(O,"/").concat(t.id),n);case 2:return r=e.sent,e.next=5,r.data;case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deleteContact:function(){var e=Object(o.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.delete("".concat(O,"/").concat(t.id));case 2:return n=e.sent,e.next=5,n.data;case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},g=function(e){var t=e.successMessage;return null===t?null:Object(d.jsx)("div",{style:{border:"4px solid green",borderRadius:10,background:"lightgrey",color:"darkgreen",marginBottom:20},children:Object(d.jsx)("h3",{style:{marginLeft:20},children:t})})},w=function(e){var t=e.errorMessage;return null===t?null:Object(d.jsx)("div",{style:{border:"4px solid red",borderRadius:10,background:"lightgrey",color:"darkred",marginBottom:20},children:Object(d.jsx)("h3",{style:{marginLeft:20},children:t})})},k=function(e){var t=e.successMessage,n=e.errorMessage;return null!==t?Object(d.jsx)(g,{successMessage:t}):null!==n?Object(d.jsx)(w,{errorMessage:n}):null},y=function(){var e=Object(l.useState)(""),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(l.useState)(""),c=Object(i.a)(a,2),j=c[0],x=c[1],m=Object(l.useState)(""),O=Object(i.a)(m,2),g=O[0],w=O[1],y=Object(l.useState)(""),C=Object(i.a)(y,2),S=C[0],D=C[1],M=Object(l.useState)(""),N=Object(i.a)(M,2),B=N[0],F=N[1],L=Object(l.useState)(null),E=Object(i.a)(L,2),J=E[0],P=E[1],R=Object(l.useState)(null),T=Object(i.a)(R,2),q=T[0],A=T[1];Object(l.useEffect)((function(){return v.getContacts().then((function(e){return F(e)}))}),[]);var I=function(){setTimeout((function(){P(null)}),5e3)},z=function(){setTimeout((function(){A(null)}),5e3)},G=function(){r(""),x(""),D(""),w("")},H=function(e){var t=e.response.data.error;A(t),z()},K=function(){var e=Object(o.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=B.find((function(e){return e.name===t.name})),r=Object(s.a)(Object(s.a)({},n),{},{number:t.number}),!n){e.next=14;break}if(!window.confirm("".concat(t.name," is already in the phonebook, replace old number with new one?"))){e.next=11;break}return e.next=6,v.updateContact(n,r).then((function(e){return F(B.map((function(t){return t.id!==n.id?t:e})))})).catch((function(e){return H(e)}));case 6:G(),P("".concat(t.name," successfully updated in phonebook")),I(),e.next=12;break;case 11:alert("Cancelled change request.");case 12:e.next=15;break;case 14:return e.abrupt("return",v.addContact(t).then((function(e){G(),F(B.concat(e)),P("".concat(t.name," successfully added to phonebook")),I()})).catch((function(e){return H(e)})));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.deleteContact(t).then((function(e){P("".concat(t.name," has been successfully deleted from the server")),I()})).catch((function(e){A("".concat(t.name," has already been deleted from the server")),z()}));case 2:v.getContacts().then((function(e){return F(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{children:[Object(d.jsx)(b,{text:"Find a contact"}),Object(d.jsx)(k,{successMessage:J,errorMessage:q}),Object(d.jsx)(f,{text:"name: ",handleData:function(e){w(e.target.value);var t=B.filter((function(e){return e.name.toLowerCase().indexOf(g.toLowerCase())>=0})).map((function(e){return Object(d.jsx)(p,{contact:e,deleteFromPhonebook:Q,setFilterBy:w},e.id)}));D(t)},newData:g}),Object(d.jsx)(b,{text:"Add a new contact"}),Object(d.jsx)(h,{handleName:function(e){r(e.target.value)},handleNumber:function(e){x(e.target.value)},handleSubmit:function(e){e.preventDefault(),K({name:n,number:j})},newName:n,newNumber:j}),Object(d.jsx)(b,{text:"numbers"}),Object(d.jsx)("div",{children:S})]})};a.a.render(Object(d.jsx)(y,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.c24f1f7d.chunk.js.map